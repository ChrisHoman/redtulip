(function(c,b,e){var d=b.Modernizr;c.Windy=function(f,g){this.$el=c(g);this._init(f)};c.Windy.defaults={nextEl:"",prevEl:"",boundaries:{rotateX:{min:40,max:90},rotateY:{min:-15,max:15},rotateZ:{min:-10,max:10},translateX:{min:-200,max:200},translateY:{min:-400,max:-200},translateZ:{min:250,max:550}}};c.Windy.prototype={_init:function(f){this.options=c.extend(true,{},c.Windy.defaults,f);this.transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd",transition:"transitionend"};this.transEndEventName=this.transEndEventNames[d.prefixed("transition")];this.$items=this.$el.children("li");this.itemsCount=this.$items.length;this.resetTransformStr="translateX( 0px ) translateY( 0px ) translateZ( 0px ) rotateX( 0deg ) rotateY( 0deg ) rotateZ( 0deg )";this.supportTransitions=d.csstransitions;this.support3d=d.csstransforms3d;this.current=0;this.$items.eq(this.current).show();this._initEvents()},_getRandTransform:function(){return{rx:Math.floor(Math.random()*(this.options.boundaries.rotateX.max-this.options.boundaries.rotateX.min+1)+this.options.boundaries.rotateX.min),ry:Math.floor(Math.random()*(this.options.boundaries.rotateY.max-this.options.boundaries.rotateY.min+1)+this.options.boundaries.rotateY.min),rz:Math.floor(Math.random()*(this.options.boundaries.rotateZ.max-this.options.boundaries.rotateZ.min+1)+this.options.boundaries.rotateZ.min),tx:Math.floor(Math.random()*(this.options.boundaries.translateX.max-this.options.boundaries.translateX.min+1)+this.options.boundaries.translateX.min),ty:Math.floor(Math.random()*(this.options.boundaries.translateY.max-this.options.boundaries.translateY.min+1)+this.options.boundaries.translateY.min),tz:Math.floor(Math.random()*(this.options.boundaries.translateZ.max-this.options.boundaries.translateZ.min+1)+this.options.boundaries.translateZ.min)}},_initEvents:function(){var f=this;this.$items.on(this.transEndEventName,function(g){f._onTransEnd(c(this))});if(this.options.nextEl!==""){c(this.options.nextEl).on("click.windy",function(){f.next();return false})}if(this.options.prevEl!==""){c(this.options.prevEl).on("click.windy",function(){f.prev();return false})}},_onTransEnd:function(g){g.removeClass("wi-move");if(g.data("dir")==="right"){var f={zIndex:1,opacity:1};if(this.support3d){f.transform=this.resetTransformStr}else{if(this.supportTransitions){f.left=0;f.top=0}}g.hide().css(f)}},navigate:function(f){var i=this,l=this.$items.eq(this.current),h=this.$items.eq(f),j=this._getRandTransform(),g={zIndex:this.itemsCount+1-f,opacity:0},k={opacity:1};if(this.support3d){k.transform=i.resetTransformStr;g.transform="translateX("+j.tx+"px) translateY("+j.ty+"px) translateZ("+j.tz+"px) rotateX("+j.rx+"deg) rotateY("+j.ry+"deg) rotateZ("+j.rz+"deg)"}else{if(this.supportTransitions){k.left=0;k.top=0;g.left=j.tx;g.top=j.ty}}if(f>this.current){if(this.dir==="left"){this.$items.not(l).css("z-index",1).hide()}this.dir="right";l.addClass("wi-move").data("dir","right").css(g);if(h.hasClass("wi-move")){h.removeClass("wi-move")}h.css(k).show();if(!this.supportTransitions){this._onTransEnd(l)}}else{if(f<this.current){this.dir="left";h.data("dir","left").css(g).show();setTimeout(function(){h.addClass("wi-move").data("dir","left").css(k);if(!i.supportTransitions){i._onTransEnd(h)}},20)}}this.current=f},getItemsCount:function(){return this.itemsCount},next:function(){if(this.current<this.itemsCount-1){var f=this.current+1;this.navigate(f)}},prev:function(){if(this.current>0){var f=this.current-1;this.navigate(f)}},update:function(){var f=this.$items.eq(this.current);this.$items=this.$el.children("li");this.itemsCount=this.$items.length;this.current=f.index()}};var a=function(f){if(b.console){b.console.error(f)}};c.fn.windy=function(h){var f=c.data(this,"windy");if(typeof h==="string"){var g=Array.prototype.slice.call(arguments,1);this.each(function(){if(!f){a("cannot call methods on windy prior to initialization; attempted to call method '"+h+"'");return}if(!c.isFunction(f[h])||h.charAt(0)==="_"){a("no such method '"+h+"' for windy instance");return}f[h].apply(f,g)})}else{this.each(function(){if(f){f._init()}else{f=c.data(this,"windy",new c.Windy(h,this))}})}return f}})(jQuery,window);